<!DOCTYPE html>
<html xmlns:th="http://http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>product Form</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<style>
	.input_area {
		display: flex;
		margin-bottom: 20px;
	}
	
	.label_area {
		width: 200px;
	}
	
	.text_area {
		resize: none;
		width: 400px;
		height: 300px;
		overflow-y: scroll;
	}
	
	input[type=range] {
		display: inline;
		background: #c4c4c4;
		-webkit-appearance: none;
		border-radius: 5px;
		height: 0.5em;
	}
	
	input[type=range]::-webkit-slider-thumb {
		-webkit-appearance: none;
		background: #83131E;
		cursor: pointer;
		border: 1px solid #000000;
		height: 1em;
		width: 1em;
		border-radius: 50%;
	}
	
	.image_area {
		width: 350px;
		height: 350px;
		border: 1px solid black;
	}
	
	.cancle_btn {
		border: 1px solid #83131E;
		border-radius: 5px;
		background: white;
		color: #83131E;
	}
	
	.insert_btn {
		border: 1px solid #83131E;
		border-radius: 5px;
		background: #83131E;
		color: white;
	}
	
	.btn {
		height: 44px;
		width: 98.9552230834961px;
		left: 0px;
		top: 0px;
		border-radius: 5px;
	}
	
	#enroll_form {
		width: 800px;
	}
	
	#btn_area {
		width: 500px;
		text-align: center;
	}
	
	#hash_btn {
		background: #83131E;
		color: white;
		margin-left: 20px;
		border-radius: 5px;
		border: 1px solid #83131E;
	}
	.category > select {
		width: 140px;
	}
	.name_area {
		width: 400px;
	}
</style>    
</head>
<body>
    <h1>상품 수정</h1>
    <hr>
    <form id="enrollForm" th:action="@{/product/regist(${_csrf.parameterName}=${_csrf.token})}" method="post" encType="multipart/form-data">
        <h3>상품 기본 정보</h3>
        <div class="input_area">
            <div class="label_area">카테고리</div>
            <div class="category">
                <select name="typeNo" id="type" required></select><br>
                <select name="countryNo" id="country" required></select><br>
                <select name="varietyNo" id="variety" required></select>
            </div>
        </div>
        <div class="input_area">
            <div class="label_area">상품명</div>
            <div>
                <input class="name_area" type="text" name="kname" placeholder="한글명" required><br>
                <input class="name_area" type="text" name="ename" placeholder="영문명" required>
            </div>
        </div>
        <div class="input_area">
            <div class="label_area">원가</div>
            <div><input type="number" name="costPrice" min="0" required></div>
        </div>
        <div class="input_area">
            <div class="label_area">판매가</div>
            <div><input type="number" name="salePrice" min="0" required></div>
        </div>
        <div class="input_area">
            <div class="label_area">대표 이미지</div>
            <div>
                <input name="thumbnail" type="file" accept=".gif, .jpg, .png" required>
                <div class="image_area"></div>
            </div>
        </div>
        <div class="input_area">
            <div class="label_area">수량</div>
            <div><input type="number" name="productCount" required></div>
        </div>

        <br>
        <h3>상품 상세설명</h3>
        <div class="input_area">
            <div class="label_area">와이너리</div>
            <div><input type="text" name="winary" required></div>
        </div>
        <div class="input_area">
            <div class="label_area">용량 / 도수</div>
            <div><input type="number" name="capacity" min="0" required>ml / <input type="number" name="abv" min="0" required>%</div>
        </div>
        <div class="input_area">
            <div class="label_area">해시태그</div>
            <div>
                <select name="mood1" id="mood1" required></select>
                <select name="mood2" id="mood2" required></select>
                <select name="food1" id="food1" required></select>
                <select name="food2" id="food2" required></select>
            </div>
            <button id="hash_btn" onclick="location.href='/hashtag/form'">해시태그 관리</button>
        </div>
        <div class="input_area">
            <div class="label_area">맛 그래프</div>
            <div>
                <label>당도</label><input type="range" name="sweetness" min="0" max="5" value="0" required><br>
                <label>산도</label><input type="range" name="acidity" min="0" max="5" value="0" required><br>
                <label>바디</label><input type="range" name="body" min="0" max="5" value="0" required><br>
                <label>탄닌</label><input type="range" name="tannin" min="0" max="5" value="0" required>
            </div>
        </div>
        <div class="input_area">
            <div class="label_area">INFORMATION</div>
            <div><textarea class="text_area" name="information" required></textarea></div>
        </div>
        <div class="input_area">
            <div class="label_area">AWARD</div>
            <div><textarea class="text_area" name="award" required></textarea></div>
        </div>
        <div class="input_area">
            <div class="label_area">TIP</div>
            <div><textarea class="text_area" name="tip" required></textarea></div>
        </div>
        <div class="input_area">
            <div class="label_area">LABEL IMAGE</div>
            <div>
                <input name="labelImg" type="file" accept=".gif, .jpg, .png" required>
                <div class="image_area"></div>
            </div>
        </div>
        <div id="btn_area">
            <button class="cancle_btn btn" onclick="location.href='/product/list'">취소</button>
            <button class="insert_btn btn">등록</button>
        </div>
    </form>

    <script>
        $('input[type=range]').on('input', function(){
            var val = $(this).val();
            $(this).css('background', 'linear-gradient(to right, #83131E 0%, #83131E '+ val*20 +'%, #c4c4c4 ' + val + '%, #c4c4c4 100%)');
        });
        
        $(function(){
        	$.get("/product/category", function(map) {
        		const type = $("#type");
        		const country = $("#country");
        		const variety = $("#variety");
        		
        		$.each(map['type'], function(index, value){
        			type.append($("<option>").val(value.typeNo).text(value.typeName));
					});
        		
        		$.each(map['country'], function(index, value){
        			country.append($("<option>").val(value.countryNo).text(value.countryName));
					});
        		
        		$.each(map['variety'], function(index, value){
        			variety.append($("<option>").val(value.varietyNo).text(value.varietyName));
        		});
        	});
        	
        	$.get("/hashtag/category", function(map) {
        		const mood1 = $("#mood1");
        		const mood2 = $("#mood2");
        		const food1 = $("#food1");
        		const food2 = $("#food2");
        		
        		$.each(map['mood'], function(index, value){
        			mood1.append($("<option>").val(value.hashNo).text(value.hashName));
        			mood2.append($("<option>").val(value.hashNo).text(value.hashName));
				});
        		
        		$.each(map['food'], function(index, value){
        			food1.append($("<option>").val(value.hashNo).text(value.hashName));
        			food2.append($("<option>").val(value.hashNo).text(value.hashName));
				});
        	});
        })
    </script>
</body>
</html>